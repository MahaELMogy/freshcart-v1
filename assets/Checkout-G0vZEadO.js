import{r as a,U as m,C as h,u as p,a as g,j as e,H as f,b as y,V as o}from"./index-DCoL-L-e.js";function j(){window.scrollTo(0,0);const[l,n]=a.useState(!1),{UserToken:i}=a.useContext(m),{UserIdCart:d,clearCart:c}=a.useContext(h),x=p();function u(t){n(!0),y.post(`https://ecommerce.routemisr.com/api/v1/orders/${d}`,{shippingAddress:{details:t.details,phone:t.phone,city:t.city}},{headers:{token:i}}).then(r=>{console.log(r),o.success("Order placed successfully!"),c(),x("/"),window.scrollTo(0,0)}).catch(r=>{o.error("Something went wrong with your order."),console.error(r)}).finally(()=>{n(!1)})}const s=g({initialValues:{details:"",phone:"",city:""},onSubmit:u});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"application",children:e.jsx(f,{children:e.jsx("title",{children:"Checkout"})})}),e.jsx("section",{className:"px-4 sm:px-8 md:px-16 lg:px-24 pb-10",children:e.jsxs("div",{className:"w-3/4 m-auto mb-10",children:[e.jsx("h3",{className:"my-6 text-2xl font-bold text-green-600 text-center",children:"Place Your Order"}),e.jsxs("form",{onSubmit:s.handleSubmit,className:"w-1/2 flex flex-col gap-4 bg-white border border-gray-200 rounded-lg shadow hover:shadow-md transition p-6 mx-auto",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"details",className:"text-sm text-gray-700",children:"Address Details:"}),e.jsx("input",{type:"text",id:"details",required:!0,name:"details",onChange:s.handleChange,value:s.values.details,className:"w-full px-3 py-2 rounded-md border border-gray-300 focus:ring-1 focus:ring-green-500"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"phone",className:"text-sm text-gray-700",children:"Phone:"}),e.jsx("input",{type:"text",id:"phone",required:!0,name:"phone",onChange:s.handleChange,value:s.values.phone,className:"w-full px-3 py-2 rounded-md border border-gray-300 focus:ring-1 focus:ring-green-500"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"city",className:"text-sm text-gray-700",children:"City:"}),e.jsx("input",{required:!0,type:"text",id:"city",name:"city",onChange:s.handleChange,value:s.values.city,className:"w-full px-3 py-2 rounded-md border border-gray-300 focus:ring-1 focus:ring-green-500"})]}),e.jsx("div",{className:"",children:e.jsx("button",{type:"submit",className:"bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-4 rounded-md w-full",disabled:l,children:l?e.jsx("i",{className:"fa-solid fa-spinner fa-spin-pulse"}):"Place Order"})})]})]})})]})}export{j as default};
