import{r as l,c as u,C as y,W as C,j as e,S as L,H as P,L as _,b as j}from"./index-DCoL-L-e.js";function $(){var m;const[a,f]=l.useState(null),[i,v]=l.useState([]),{id:n,category:x}=u(),{addItem:o}=l.useContext(y),{addToWishlist:N,removeFromWishlist:b,wishlistItems:r}=l.useContext(C);window.scrollTo(0,0);const c=s=>r==null?void 0:r.some(t=>t._id===s),d=s=>{c(s)?b(s):N(s)};async function w(){try{const s=await j.get(`https://ecommerce.routemisr.com/api/v1/products/${n}`);f(s.data.data)}catch{alert("Failed to fetch product details")}}async function p(){try{const t=(await j.get("https://ecommerce.routemisr.com/api/v1/products")).data.data.filter(h=>h.category.name===x);v(t)}catch(s){console.log(s)}}return l.useEffect(()=>{w(),p()},[n,x]),a?e.jsx(e.Fragment,{children:e.jsxs("section",{className:"px-4 sm:px-8 md:px-16 lg:px-24 pb-10",children:[e.jsx("div",{className:"application",children:e.jsx(P,{children:e.jsx("title",{children:"Products Details"})})}),e.jsx("section",{className:"p-6",children:e.jsxs("div",{className:"flex items-center lg:flex-row flex-col gap-6",children:[e.jsxs("div",{className:"w-full lg:w-1/4",children:[e.jsx("img",{src:a.imageCover,alt:"",className:"w-full object-cover rounded-xl mb-2"}),e.jsx("div",{className:"flex gap-2 justify-center",children:(m=a.images)==null?void 0:m.slice(0,4).map((s,t)=>e.jsx("img",{src:s,alt:`thumb-${t}`,className:"w-1/4 rounded"},t))})]}),e.jsxs("div",{className:"w-full lg:w-3/4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"text-4xl font-bold",children:a.title}),e.jsx("div",{onClick:()=>d(a._id),className:"cursor-pointer",children:e.jsx("i",{className:`fa-solid fa-heart text-3xl transition ${c(a._id)?"text-red-500":"text-gray-400"}`})})]}),e.jsx("p",{className:"mb-4 text-gray-700",children:a.description}),e.jsxs("div",{className:"flex items-center mb-4",children:[[...Array(5)].map((s,t)=>e.jsx("svg",{className:`w-5 h-5 ${t<Math.floor(a.ratingsAverage)?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 22 20",children:e.jsx("path",{d:"M10.5 0L12.9 6.3l6.6.9-4.8 4.7 1.1 6.5L10.5 15l-5.9 3.1L5.7 11 1 6.3l6.6-.9L10.5 0z"})},t)),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:a.ratingsAverage})]}),e.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-4",children:["EGP ",a.price]}),e.jsx("button",{onClick:()=>o(a.id),className:"w-full bg-green-500 hover:bg-green-600 text-white py-3 rounded-xl font-semibold",children:"Add to Cart"})]})]})}),e.jsxs("section",{className:"py-8 px-4 max-w-[1400px] mx-auto",children:[e.jsx("h3",{className:"text-2xl font-bold mb-4 text-gray-700",children:"Related Products"}),e.jsx("div",{className:"flex flex-wrap -mx-2",children:i==null?void 0:i.map(s=>{var t;return e.jsx("div",{className:"w-full sm:w-1/2 md:w-1/3 lg:w-1/4 p-2 relative",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow hover:shadow-md transition flex flex-col p-2",children:[e.jsx("div",{onClick:()=>d(s._id),className:"absolute top-5 right-5 cursor-pointer z-10",children:e.jsx("i",{className:`fa-solid fa-heart text-2xl ${c(s._id)?"text-red-500":"text-gray-400"}`})}),e.jsxs(_,{to:`/ProductsDetails/${s._id}/${(t=s==null?void 0:s.category)==null?void 0:t.name}`,children:[e.jsx("img",{className:"w-full h-48 object-contain p-4",src:s.imageCover,alt:s.slug}),e.jsxs("div",{className:"px-5 pb-5",children:[e.jsx("h5",{className:"text-lg font-semibold truncate mb-2 text-gray-900 dark:text-white",children:s.title}),e.jsxs("div",{className:"flex items-center mb-3",children:[[...Array(5)].map((h,g)=>e.jsx("svg",{className:`w-4 h-4 ${g<Math.floor(s.ratingsAverage)?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 22 20",children:e.jsx("path",{d:"M10.5 0L12.9 6.3l6.6.9-4.8 4.7 1.1 6.5L10.5 15l-5.9 3.1L5.7 11 1 6.3l6.6-.9L10.5 0z"})},g)),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:s.ratingsAverage})]}),e.jsxs("div",{className:"text-xl font-bold text-gray-800",children:[s.price," EGP"]})]})]}),e.jsx("button",{onClick:()=>o(s==null?void 0:s._id),className:"mt-2 bg-green-500 text-white text-sm px-4 py-2 rounded-lg hover:bg-green-700 transition",children:"Add to cart"})]})},s._id)})})]})]})}):e.jsx(L,{})}export{$ as default};
